---
name: Tests

on: push

jobs:
  tests:
    name: Unit Testing
    
    runs-on: windows-latest
    
    env:
      SOLUTION_PATH: PSA2.sln
      TEST_PROJECT_PATH: PSA2Tests/PSA2Tests.csproj
    
    steps:
    - uses: actions/checkout@v2
    - name: Setup .NET Core
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: '3.1.x'
    - name: Setup MSBuild.exe
      uses: microsoft/setup-msbuild@v1.0.1
    - name: Setup Nuget.exe
      uses: warrenbuckley/Setup-Nuget@v1
    - name: build projects
      run: nuget restore $env:SOLUTION_PATH
      run: msbuild $env:SOLUTION_PATH
    - name: run tests
      run: dotnet test $env:TEST_PROJECT_PATH --verbosity normal